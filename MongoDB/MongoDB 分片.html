<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.2.1 (456793)"/><meta name="keywords" content="MongoDB"/><meta name="created" content="2018-09-10 11:19:17 +0000"/><meta name="source" content="web.clip7"/><meta name="source-application" content="WebClipper 7"/><meta name="source-url" content="http://www.runoob.com/mongodb/mongodb-sharding.html"/><meta name="updated" content="2018-09-10 11:19:17 +0000"/><title>MongoDB 分片</title></head><body>
  <div>
<div style="font-size: 16px; display: inline-block;  min-width: 100%;position: relative;"><div style="font-size:62.5%;"><div style="font-size:1.2em;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;-webkit-font-smoothing:antialiased;background:url(./assets/img/bg.gif) no-repeat rgb(246, 246, 246);color:rgb(51, 51, 51);"><div><div style="min-width:755px;overflow:hidden;"><div><div style="background:rgb(255, 255, 255);border-image:initial;">
			
		<div style="margin:0px;border:1px solid rgb(231, 234, 241);padding:10px 30px;line-height:24px;overflow:hidden;background:rgb(251, 251, 251);color:rgb(133, 144, 166);font-size:15px;box-shadow:rgba(0, 37, 55, 0.05) 0px 1px 3px;box-sizing:border-box;">
			<div style="border:0px;margin:0px;padding:0px;float:left;"><a href="http://www.runoob.com/mongodb/mongodb-replication.html" style="border:0px;margin:0px;padding:0px;text-decoration:none;transition-duration:0.2s;transition-property:opacity;color:grey;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:16px;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i></a> <a href="http://www.runoob.com/mongodb/mongodb-replication.html" rel="prev" title="MongoDB 复制(副本集)" style="border:0px;margin:0px;padding:0px;text-decoration:none;transition-duration:0.2s;transition-property:opacity;color:grey;">MongoDB 复制(副本集)</a> </div>
			<div style="border:0px;margin:0px;padding:0px;float:right;"><a href="http://www.runoob.com/mongodb/mongodb-mongodump-mongorestore.html" rel="next" title="MongoDB 备份(mongodump)与恢复(mongorestore)" style="border:0px;margin:0px;padding:0px;text-decoration:none;transition-duration:0.2s;transition-property:opacity;color:grey;">MongoDB 备份(mongodump)与恢复(mongorestore)</a> <a href="http://www.runoob.com/mongodb/mongodb-mongodump-mongorestore.html" style="border:0px;margin:0px;padding:0px;text-decoration:none;transition-duration:0.2s;transition-property:opacity;color:grey;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:16px;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i></a></div>
		</div>
		<div style="border:0px;margin:0px;padding:10px 10px 20px;">
		
			<div style="border:0px;margin:0px;padding:0px;">
			
			<h1 style="border:0px;padding:0px;margin:0px 0px 10px;font-size:2.1em;color:rgb(0, 0, 0);text-decoration:none;text-indent:initial;">MongoDB 分片</h1>
<hr style="background-color:rgb(212, 212, 212);color:rgb(212, 212, 212);height:1px;border:0px;clear:both;"/>
<h2 style="border:0px;padding:0px;margin:2px 0px;font-size:1.8em;line-height:1.8em;">分片</h2>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">在Mongodb里面存在另一种集群，就是分片技术,可以满足MongoDB数据量大量增长的需求。</p>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">当MongoDB存储海量的数据时，一台机器可能不足以存储数据，也可能不足以提供可接受的读写吞吐量。这时，我们就可以通过在多台机器上分割数据，使得数据库系统能存储和处理更多的数据。 </p>
<hr style="background-color:rgb(212, 212, 212);color:rgb(212, 212, 212);height:1px;border:0px;clear:both;"/>
<h2 style="border:0px;padding:0px;margin:2px 0px;font-size:1.8em;line-height:1.8em;">为什么使用分片</h2>
<ul style="border:0px;list-style:none;margin:0px;padding:0px;line-height:140%;list-style-type:none;margin-top:1em;margin-bottom:1em;">
<li style="background-size:auto 8px;list-style-type:none;background-repeat:no-repeat;background-position:left 0.5em;padding:0px 0px 0px 1.5em;background-image:url(./assets/img/bullet.png);border:0px;margin:0px 0px 1em 1em;line-height:1.5em;font-size:13px;word-break:break-all;">复制所有的写入操作到主节点</li>
<li style="background-size:auto 8px;list-style-type:none;background-repeat:no-repeat;background-position:left 0.5em;padding:0px 0px 0px 1.5em;background-image:url(./assets/img/bullet.png);border:0px;margin:0px 0px 1em 1em;line-height:1.5em;font-size:13px;word-break:break-all;">延迟的敏感数据会在主节点查询</li>
<li style="background-size:auto 8px;list-style-type:none;background-repeat:no-repeat;background-position:left 0.5em;padding:0px 0px 0px 1.5em;background-image:url(./assets/img/bullet.png);border:0px;margin:0px 0px 1em 1em;line-height:1.5em;font-size:13px;word-break:break-all;">单个副本集限制在12个节点</li>
<li style="background-size:auto 8px;list-style-type:none;background-repeat:no-repeat;background-position:left 0.5em;padding:0px 0px 0px 1.5em;background-image:url(./assets/img/bullet.png);border:0px;margin:0px 0px 1em 1em;line-height:1.5em;font-size:13px;word-break:break-all;">当请求量巨大时会出现内存不足。</li>
<li style="background-size:auto 8px;list-style-type:none;background-repeat:no-repeat;background-position:left 0.5em;padding:0px 0px 0px 1.5em;background-image:url(./assets/img/bullet.png);border:0px;margin:0px 0px 1em 1em;line-height:1.5em;font-size:13px;word-break:break-all;">本地磁盘不足</li>
<li style="background-size:auto 8px;list-style-type:none;background-repeat:no-repeat;background-position:left 0.5em;padding:0px 0px 0px 1.5em;background-image:url(./assets/img/bullet.png);border:0px;margin:0px 0px 1em 1em;line-height:1.5em;font-size:13px;word-break:break-all;">垂直扩展价格昂贵</li>
</ul>
<hr style="background-color:rgb(212, 212, 212);color:rgb(212, 212, 212);height:1px;border:0px;clear:both;"/>
<h2 style="border:0px;padding:0px;margin:2px 0px;font-size:1.8em;line-height:1.8em;">MongoDB分片</h2>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">下图展示了在MongoDB中使用分片集群结构分布：</p><p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">
<img src="MongoDB%20%E5%88%86%E7%89%87.resources/sharding.png" height="411" width="600"/></p>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">上图中主要有如下所述三个主要组件：</p>
<ul style="border:0px;list-style:none;margin:0px;padding:0px;line-height:140%;list-style-type:none;margin-top:1em;margin-bottom:1em;">
<li style="background-size:auto 8px;list-style-type:none;background-repeat:no-repeat;background-position:left 0.5em;padding:0px 0px 0px 1.5em;background-image:url(./assets/img/bullet.png);border:0px;margin:0px 0px 1em 1em;line-height:1.5em;font-size:13px;word-break:break-all;"><strong style="border:0px;margin:0px;padding:0px;">
Shard:</strong><p style="border:0px;margin:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;padding:0px 10px;">用于存储实际的数据块，实际生产环境中一个shard server角色可由几台机器组个一个replica set承担，防止主机单点故障
</p></li><li style="background-size:auto 8px;list-style-type:none;background-repeat:no-repeat;background-position:left 0.5em;padding:0px 0px 0px 1.5em;background-image:url(./assets/img/bullet.png);border:0px;margin:0px 0px 1em 1em;line-height:1.5em;font-size:13px;word-break:break-all;"><strong style="border:0px;margin:0px;padding:0px;">
Config Server:</strong><p style="border:0px;margin:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;padding:0px 10px;">mongod实例，存储了整个 ClusterMetadata，其中包括 chunk信息。
</p></li><li style="background-size:auto 8px;list-style-type:none;background-repeat:no-repeat;background-position:left 0.5em;padding:0px 0px 0px 1.5em;background-image:url(./assets/img/bullet.png);border:0px;margin:0px 0px 1em 1em;line-height:1.5em;font-size:13px;word-break:break-all;"><strong style="border:0px;margin:0px;padding:0px;">
Query Routers:</strong><p style="border:0px;margin:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;padding:0px 10px;">前端路由，客户端由此接入，且让整个集群看上去像单一数据库，前端应用可以透明使用。</p></li></ul>
<hr style="background-color:rgb(212, 212, 212);color:rgb(212, 212, 212);height:1px;border:0px;clear:both;"/>
<h2 style="border:0px;padding:0px;margin:2px 0px;font-size:1.8em;line-height:1.8em;">分片实例</h2>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">分片结构端口分布如下：</p>
<pre style="word-wrap:break-word;border:0px;border-image:initial;font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;margin:15px auto;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);padding:10px 15px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Server</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">：</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">27020</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Server</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">2</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">：</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">27021</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Server</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">3</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">：</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">27022</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Server</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">4</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">：</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">27023</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Config</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Server</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">：</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">27100</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Route</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">Process</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">：</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">40000</span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">步骤一：启动Shard Server</p>
<pre style="word-wrap:break-word;border:0px;border-image:initial;font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;margin:15px auto;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);padding:10px 15px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">root@100 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/]#</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> mkdir </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">-</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">p </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">www</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">s0
</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">root@100 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/]#</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> mkdir </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">-</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">p </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">www</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">s1
</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">root@100 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/]#</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> mkdir </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">-</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">p </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">www</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">s2
</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">root@100 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/]#</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> mkdir </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">-</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">p </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">www</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">s3
</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">root@100 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/]#</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> mkdir </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">-</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">p </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">www</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">log
</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">root@100 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/]#</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">usr</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 136);">local</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">bin</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongod </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">port </span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">27020</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">dbpath</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">=</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">/www/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">s0 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">logpath</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">=</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">/www/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">log</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">s0</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">log </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">logappend </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">fork
</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">....</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">root@100 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/]#</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">usr</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 136);">local</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">bin</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongod </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">port </span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">27023</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">dbpath</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">=</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">/www/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">s3 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">logpath</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">=</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">/www/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">log</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">s3</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">log </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">logappend </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">fork</span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">步骤二：
启动Config Server</p>
<pre style="word-wrap:break-word;border:0px;border-image:initial;font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;margin:15px auto;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);padding:10px 15px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">root@100 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/]#</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> mkdir </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">-</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">p </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">www</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">config
</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">root@100 </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/]#</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">usr</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 136);">local</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">bin</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongod </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">port </span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">27100</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">dbpath</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">=</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">/www/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">config </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">logpath</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">=</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">/www/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">log</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">config</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">log </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">logappend </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">fork</span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;"><strong style="border:0px;margin:0px;padding:0px;">注意：</strong>这里我们完全可以像启动普通mongodb服务一样启动，不需要添加—shardsvr和configsvr参数。因为这两个参数的作用就是改变启动端口的，所以我们自行指定了端口就可以。

</p>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">步骤三：
启动Route Process</p>
<pre style="word-wrap:break-word;border:0px;border-image:initial;font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;margin:15px auto;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);padding:10px 15px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">/usr/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 136);">local</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">bin</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongos </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">port </span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">40000</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">configdb localhost</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">27100</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">fork </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">logpath</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">=</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">/www/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">log</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">route</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">log </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">chunkSize </span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">500</span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">
mongos启动参数中，chunkSize这一项是用来指定chunk的大小的，单位是MB，默认大小为200MB.</p>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">步骤四：
配置Sharding</p>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">接下来，我们使用MongoDB Shell登录到mongos，添加Shard节点</p>
<pre style="word-wrap:break-word;border:0px;border-image:initial;font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;margin:15px auto;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);padding:10px 15px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">root@100 shard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">]#</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">usr</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 136);">local</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">bin</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">mongo admin </span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">--</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">port </span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">40000</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 0, 102);">MongoDB</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> shell version</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">2.0</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">7</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">
connecting to</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">127.0</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">0.1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">40000</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">/</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">admin
mongos</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> db</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">runCommand</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">({</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> addshard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"localhost:27020"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">})</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">{</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"shardAdded"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"shard0000"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"ok"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">}</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">......</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">
mongos</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> db</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">runCommand</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">({</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> addshard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"localhost:27029"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">})</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">{</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"shardAdded"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"shard0009"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"ok"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">}</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">
mongos</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> db</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">runCommand</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">({</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> enablesharding</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"test"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">})</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);">#设置分片存储的数据库</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">{</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"ok"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">}</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">
mongos</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> db</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">runCommand</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">({</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> shardcollection</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"test.log"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> key</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">{</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> id</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">time</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">}})</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">{</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"collectionsharded"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"test.log"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">"ok"</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">}</span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:2em;word-wrap:break-word;word-break:break-all;font-size:13px;font-family:&quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif;">步骤五：
程序代码内无需太大更改，直接按照连接普通的mongo数据库那样，将数据库连接接入接口40000</p>			
			
			</div>
			
		</div>
		
		<div style="margin:0px;border:1px solid rgb(231, 234, 241);padding:10px 30px;line-height:24px;overflow:hidden;background:rgb(251, 251, 251);color:rgb(133, 144, 166);font-size:15px;box-shadow:rgba(0, 37, 55, 0.05) 0px 1px 3px;box-sizing:border-box;">
			<div style="border:0px;margin:0px;padding:0px;float:left;"><a href="http://www.runoob.com/mongodb/mongodb-replication.html" style="border:0px;margin:0px;padding:0px;text-decoration:none;transition-duration:0.2s;transition-property:opacity;color:grey;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:16px;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i></a> <a href="http://www.runoob.com/mongodb/mongodb-replication.html" rel="prev" title="MongoDB 复制(副本集)" style="border:0px;margin:0px;padding:0px;text-decoration:none;transition-duration:0.2s;transition-property:opacity;color:grey;">MongoDB 复制(副本集)</a> </div>
			<div style="border:0px;margin:0px;padding:0px;float:right;"><a href="http://www.runoob.com/mongodb/mongodb-mongodump-mongorestore.html" rel="next" title="MongoDB 备份(mongodump)与恢复(mongorestore)" style="border:0px;margin:0px;padding:0px;text-decoration:none;transition-duration:0.2s;transition-property:opacity;color:grey;">MongoDB 备份(mongodump)与恢复(mongorestore)</a> <a href="http://www.runoob.com/mongodb/mongodb-mongodump-mongorestore.html" style="border:0px;margin:0px;padding:0px;text-decoration:none;transition-duration:0.2s;transition-property:opacity;color:grey;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:16px;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i></a></div>
		</div>
		
		

<div style="border:0px;margin:0px;padding:0px;">
	<h2 style="background-color:rgb(246, 245, 244);border:0px;border-radius:4px 4px 0px 0px;padding:0px;top:0px;width:100%;left:0px;margin:0px 0px 10px;font-size:20px;z-index:3;font-weight:bold;color:rgb(34, 34, 34);line-height:18px;box-shadow:rgba(0, 0, 0, 0.16) 0px 2px 4px 0px, rgba(0, 0, 0, 0.12) 0px 2px 10px 0px;">
    <div style="width:60px;border:0px;padding:0px;line-height:19px;background-repeat:no-repeat;background-position:center center;height:52px;margin:0px 15px 0px 0px;font-size:12px;background-size:25px;text-align:center;padding-top:10px;color:rgb(255, 255, 255);background-color:rgb(147, 184, 116);float:left;">
		    	<i style="line-height:1;display:inline-block;font-variant:normal;font-weight:normal;font-stretch:normal;font-style:normal;font-family:FontAwesome;font-size:28px;text-rendering:auto;-webkit-font-smoothing:antialiased;margin-top:8px;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i>
    	    </div>
    <span style="border:0px;margin:0px;padding:0px;margin-left:0px;line-height:62px;">1  篇笔记</span>
 
    </h2>
</div>
<div style="border:0px;margin:0px;padding:10px;position:relative;">
	<ol style="border:0px;line-height:1.5em;margin:0px;padding:0px;list-style:none;">
		<li style="border:0px;margin:0px;padding:0px;line-height:1.5em;position:relative;margin-bottom:12px;border-bottom:1px solid rgb(238, 238, 238);"><div style="position:relative;border:0px;padding:0px;margin:0px;width:36px;color:rgb(85, 85, 85);font-family:&quot;Gill Sans&quot;, Impact, sans-serif;font-size:20px;background:rgb(236, 236, 236);text-align:center;cursor:help;transform:translateZ(0px);-webkit-font-smoothing:antialiased;height:36px;background-color:rgb(255, 255, 255);float:left;display:inline;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:36px;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i><div style="display:block;border:0px;margin:0px;left:-25px;white-space:nowrap;text-align:left;background:rgb(150, 185, 125);bottom:100%;color:rgb(255, 255, 255);padding:14px;font-size:14px;margin-bottom:15px;opacity:0;pointer-events:none;position:absolute;transform:translateY(10px);transition:all 0.25s ease-out 0s;box-shadow:rgba(0, 0, 0, 0.28) 2px 2px 6px;"><span style="white-space:nowrap;font-size:14px;text-align:left;color:rgb(255, 255, 255);bottom:-20px;display:block;height:20px;left:0px;position:absolute;width:100%;" /><p style="border:0px;margin:0px;padding:0px;line-height:1.5em;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i>   chad</p><p style="border:0px;margin:0px;padding:0px;line-height:1.5em;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i>  li1***6@163.com</p><p style="border:0px;margin:0px;padding:0px;line-height:1.5em;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i> <a rel="nofollow" target="_blank" href="https://segmentfault.com/a/1190000012148843" style="border:0px;margin:0px;padding:0px;text-decoration:none;transition-duration:0.2s;transition-property:opacity;color:rgb(255, 255, 255);">  参考地址</a></p><span style="white-space:nowrap;font-size:14px;text-align:left;color:rgb(255, 255, 255);border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid rgb(150, 185, 125);bottom:-10px;height:0px;left:20%;margin-left:-13px;position:absolute;width:0px;" /></div></div><div style="border:0px;margin:0px;padding:0px 0px 15px;margin-left:46px;margin-right:60px;color:rgb(51, 51, 51);line-height:22px;position:relative;font-size:14px;word-wrap:break-word;"><p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;"><strong style="border:0px;margin:0px;padding:0px;">1. 创建Sharding复制集 rs0</strong></p>

<pre style="word-wrap:break-word;border:0px;background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;border-image:initial;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);margin:3px 0px 5px;padding:7px 10px;border-radius:1px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># mkdir /data/log</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># mkdir /data/db1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># nohup mongod --port 27020 --dbpath=/data/db1 --logpath=/data/log/rs0-1.log --logappend --fork --shardsvr --replSet=rs0 &amp;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"

/><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># mkdir /data/db2</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># nohup mongod --port 27021 --dbpath=/data/db2 --logpath=/data/log/rs0-2.log --logappend --fork --shardsvr --replSet=rs0 &amp;</span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;">1.1 复制集rs0配置</p>

# mongo localhost:27020
&gt; rs.initiate({_id: 'rs0', members: [{_id: 0, host: 'localhost:27020'}, {_id: 1, host: 'localhost:27021'}]})
&gt; rs.isMaster()  #查看主从关系
<p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;"><strong style="border:0px;margin:0px;padding:0px;">2. 创建Sharding复制集 rs1</strong></p>

<pre style="word-wrap:break-word;border:0px;background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;border-image:initial;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);margin:3px 0px 5px;padding:7px 10px;border-radius:1px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># mkdir /data/db3</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># nohup mongod --port 27030 --dbpath=/data/db3 --logpath=/data/log/rs1-1.log --logappend --fork --shardsvr --replSet=rs1 &amp;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># mkdir /data/db4</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># nohup mongod --port 27031 --dbpath=/data/db4 --logpath=/data/log/rs1-2.log --logappend --fork --shardsvr --replSet=rs1 &amp;</span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;">2.1 复制集rs1配置</p>

<pre style="word-wrap:break-word;border:0px;background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;border-image:initial;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);margin:3px 0px 5px;padding:7px 10px;border-radius:1px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># mongo localhost:27030</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> rs</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">initiate</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">({</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">_id</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">'rs1'</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> members</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[{</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">_id</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">0</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> host</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">'localhost:27030'</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">},</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">{</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">_id</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> host</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">'localhost:27031'</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">}]})</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> rs</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">isMaster</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">()</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);">#查看主从关系</span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;"><strong style="border:0px;margin:0px;padding:0px;">3. 创建Config复制集 conf</strong></p>

<pre style="word-wrap:break-word;border:0px;background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;border-image:initial;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);margin:3px 0px 5px;padding:7px 10px;border-radius:1px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># mkdir /data/conf1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># nohup mongod --port 27100 --dbpath=/data/conf1 --logpath=/data/log/conf-1.log --logappend --fork --configsvr --replSet=conf &amp;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># mkdir /data/conf2</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># nohup mongod --port 27101 --dbpath=/data/conf2 --logpath=/data/log/conf-2.log --logappend --fork --configsvr --replSet=conf &amp;</span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;">3.1 复制集conf配置</p>

<pre style="word-wrap:break-word;border:0px;background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;border-image:initial;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);margin:3px 0px 5px;padding:7px 10px;border-radius:1px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># mongo localhost:27100</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> rs</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">initiate</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">({</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">_id</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">'conf'</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> members</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">[{</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">_id</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">0</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> host</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">'localhost:27100'</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">},</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">{</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">_id</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> host</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">'localhost:27101'</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">}]})</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> rs</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">isMaster</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">()</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);">#查看主从关系</span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;"><strong style="border:0px;margin:0px;padding:0px;">4. 创建Route</strong></p>

<pre style="word-wrap:break-word;border:0px;background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;border-image:initial;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);margin:3px 0px 5px;padding:7px 10px;border-radius:1px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># nohup mongos --port 40000 --configdb conf/localhost:27100,localhost:27101 --fork --logpath=/data/log/route.log --logappend &amp; </span></pre>
<p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;">4.1 设置分片</p>

<pre style="word-wrap:break-word;border:0px;background:url(/images/codecolorer_bg.gif) center top rgb(251, 251, 251);font:12px/20px Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;lucida console&quot;, &quot;Courier New&quot;, monospace;white-space:pre-wrap;word-break:break-all;border-image:initial;border-width:1px 1px 1px 4px;border-style:solid;border-color:rgb(221, 221, 221);margin:3px 0px 5px;padding:7px 10px;border-radius:1px;"><span style="border:0px;margin:0px;padding:0px;color:rgb(136, 0, 0);"># mongo localhost:40000</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 136);">use</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> admin
</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> db</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">runCommand</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">({</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> addshard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">'rs0/localhost:27020,localhost:27021'</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">})</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> db</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">runCommand</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">({</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> addshard</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">'rs1/localhost:27030,localhost:27031'</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">})</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> db</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">runCommand</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">({</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> enablesharding</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">'test'</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">})</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"
/><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">&gt;</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> db</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">.</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">runCommand</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">({</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> shardcollection</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 136, 0);">'test.user'</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">,</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);"> key</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">{</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);">name</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">:</span><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 0, 0);" /><span style="border:0px;margin:0px;padding:0px;color:rgb(0, 102, 102);">1</span><span style="border:0px;margin:0px;padding:0px;color:rgb(102, 102, 0);">}})</span></pre><div style="font-family:&quot;Gill Sans&quot;, Impact, sans-serif;border:0px;padding:0px;margin:0px;color:rgb(187, 187, 187);cursor:help;background:rgb(236, 236, 236);font-size:12px;position:relative;text-align:center;width:200px;transform:translateZ(0px);-webkit-font-smoothing:antialiased;"><span style="border:0px;margin:0px;padding:0px;margin-right:5px;"><a target="_blank" href="#" style="border:0px;margin:0px;padding:0px;color:rgb(100, 133, 76);text-decoration:none;transition-duration:0.2s;transition-property:opacity;">chad</a><div style="left:-25px;border:0px;margin:0px;margin-bottom:15px;white-space:nowrap;text-align:left;background:rgb(150, 185, 125);bottom:100%;color:rgb(255, 255, 255);display:block;padding:14px;font-size:14px;opacity:0;pointer-events:none;position:absolute;transform:translateY(10px);transition:all 0.25s ease-out 0s;box-shadow:rgba(0, 0, 0, 0.28) 2px 2px 6px;margin-left:50px;padding-top:0px;"><span style="white-space:nowrap;font-size:14px;text-align:left;color:rgb(255, 255, 255);bottom:-20px;display:block;height:20px;left:0px;position:absolute;width:100%;" /><p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i>   chad</p><p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i>  li1***6@163.com</p><p style="border:0px;margin:0px;padding:0px;line-height:1.5em;margin-top:4px;margin-bottom:4px;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i> <a rel="nofollow" target="_blank" href="https://segmentfault.com/a/1190000012148843" style="border:0px;margin:0px;padding:0px;text-decoration:none;transition-duration:0.2s;transition-property:opacity;color:rgb(255, 255, 255);">  参考地址</a></p><span style="white-space:nowrap;font-size:14px;text-align:left;color:rgb(255, 255, 255);border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid rgb(150, 185, 125);bottom:-10px;height:0px;left:20%;margin-left:-13px;position:absolute;width:0px;" /></div></span>10个月前 (11-24)</div></div></li>
	</ol>
	<div style="border:0px;margin:0px;padding:0px;"
			/>
</div>

<div style="border:0px;margin:0px;padding:10px;position:relative;"> 
		<div style="border:0px;margin:0px;padding:30px 20px;background-color:rgb(246, 246, 246);border-radius:7px;text-align:center;margin-bottom:20px;">
	<h3 style="border:0px;margin:0px 0px 15px;padding:0px;font-size:18px;font-weight:normal;color:#799961;"><i style="display:inline-block;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:1;font-family:FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;"><span style="font-style:normal;font-variant:normal;font-weight:normal;line-height:1;font-family:FontAwesome;font-size:inherit;"></span></i> 点我分享笔记</h3>
	
	<p style="border:0px;margin:0px;padding:0px;line-height:1.5em;font-size:14px;">笔记需要是本篇文章的内容扩展！</p><br/>
	
	</div>
		
	
	</div>







		<div style="border:0px;margin:0px;padding:0px;background:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.1) 0px 1px 1px 0px;text-align:center;background-color:rgb(255, 255, 255);">
				<div style="border:0px;margin:0px auto;padding:8px;width:360px;text-align:center;overflow:hidden;">
		
		
		<ins style="border:0px;margin:0px;padding:0px;display:block;"/>
		
		</div>
				</div>
		
	</div></div></div></div></div></div></div>
</div>
</body></html>